# Use the official PostgreSQL image as base
FROM postgres:15-alpine

# Set environment variables
ENV POSTGRES_DB=my_app_db
ENV POSTGRES_USER=appuser
ENV POSTGRES_PASSWORD=mysecretpassword

# Create directory for initialization scripts
RUN mkdir -p /docker-entrypoint-initdb.d

# Copy initialization scripts from the scripts directory
COPY 01_7D_DB.sql /docker-entrypoint-initdb.d/01_schema.sql
COPY 02_quadrants.sql /docker-entrypoint-initdb.d/02_quadrants.sql
COPY 03_contract-units.sql /docker-entrypoint-initdb.d/03_contract_units.sql
COPY 04_mock_data.sql /docker-entrypoint-initdb.d/04_mock_data.sql
COPY 05_notifications.sql /docker-entrypoint-initdb.d/05_notifications.sql

# Set proper permissions for initialization scripts
RUN chmod 755 /docker-entrypoint-initdb.d/*.sql

# The official PostgreSQL image already handles user permissions
# No need to create custom users or modify permissions


